!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n(require("cose-base")):"function"==typeof define&&define.amd?define(["cose-base"],n):"object"==typeof exports?exports.cytoscapeCoseBilkent=n(require("cose-base")):t.cytoscapeCoseBilkent=n(t.coseBase)}(this,function(t){return function(t){var n={};function e(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,e),i.l=!0,i.exports}return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,o){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=1)}([function(n,e){n.exports=t},function(t,n,e){"use strict";var o=e(0).layoutBase.LayoutConstants,i=e(0).layoutBase.FDLayoutConstants,a=e(0).CoSEConstants,r=e(0).CoSELayout,s=e(0).CoSENode,d=e(0).layoutBase.PointD,l=e(0).layoutBase.DimensionD,u={ready:function(){},stop:function(){},quality:"default",nodeDimensionsIncludeLabels:!1,refresh:30,fit:!0,padding:10,randomize:!0,nodeRepulsion:4500,idealEdgeLength:50,edgeElasticity:.45,nestingFactor:.1,gravity:.25,numIter:2500,tile:!0,animate:"end",animationDuration:500,tilingPaddingVertical:10,tilingPaddingHorizontal:10,gravityRangeCompound:1.5,gravityCompound:1,gravityRange:3.8,initialEnergyOnIncremental:.5};function p(t){this.options=function(t,n){var e={};for(var o in t)e[o]=t[o];for(var o in n)e[o]=n[o];return e}(u,t),c(this.options)}var c=function(t){null!=t.nodeRepulsion&&(a.DEFAULT_REPULSION_STRENGTH=i.DEFAULT_REPULSION_STRENGTH=t.nodeRepulsion),null!=t.idealEdgeLength&&(a.DEFAULT_EDGE_LENGTH=i.DEFAULT_EDGE_LENGTH=t.idealEdgeLength),null!=t.edgeElasticity&&(a.DEFAULT_SPRING_STRENGTH=i.DEFAULT_SPRING_STRENGTH=t.edgeElasticity),null!=t.nestingFactor&&(a.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=i.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=t.nestingFactor),null!=t.gravity&&(a.DEFAULT_GRAVITY_STRENGTH=i.DEFAULT_GRAVITY_STRENGTH=t.gravity),null!=t.numIter&&(a.MAX_ITERATIONS=i.MAX_ITERATIONS=t.numIter),null!=t.gravityRange&&(a.DEFAULT_GRAVITY_RANGE_FACTOR=i.DEFAULT_GRAVITY_RANGE_FACTOR=t.gravityRange),null!=t.gravityCompound&&(a.DEFAULT_COMPOUND_GRAVITY_STRENGTH=i.DEFAULT_COMPOUND_GRAVITY_STRENGTH=t.gravityCompound),null!=t.gravityRangeCompound&&(a.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=i.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=t.gravityRangeCompound),null!=t.initialEnergyOnIncremental&&(a.DEFAULT_COOLING_FACTOR_INCREMENTAL=i.DEFAULT_COOLING_FACTOR_INCREMENTAL=t.initialEnergyOnIncremental),"draft"==t.quality?o.QUALITY=0:"proof"==t.quality?o.QUALITY=2:o.QUALITY=1,a.NODE_DIMENSIONS_INCLUDE_LABELS=i.NODE_DIMENSIONS_INCLUDE_LABELS=o.NODE_DIMENSIONS_INCLUDE_LABELS=t.nodeDimensionsIncludeLabels,a.DEFAULT_INCREMENTAL=i.DEFAULT_INCREMENTAL=o.DEFAULT_INCREMENTAL=!t.randomize,a.ANIMATE=i.ANIMATE=o.ANIMATE=t.animate,a.TILE=t.tile,a.TILING_PADDING_VERTICAL="function"==typeof t.tilingPaddingVertical?t.tilingPaddingVertical.call():t.tilingPaddingVertical,a.TILING_PADDING_HORIZONTAL="function"==typeof t.tilingPaddingHorizontal?t.tilingPaddingHorizontal.call():t.tilingPaddingHorizontal};p.prototype.run=function(){var t,n,e=this.options,o=(this.idToLNode={},this.layout=new r),i=this;i.stopped=!1,this.cy=this.options.cy,this.cy.trigger({type:"layoutstart",layout:this});var a=o.newGraphManager();this.gm=a;var s=this.options.eles.nodes(),d=this.options.eles.edges();this.root=a.addRoot(),this.processChildrenList(this.root,this.getTopMostNodes(s),o);for(var l=0;l<d.length;l++){var u=d[l],p=this.idToLNode[u.data("source")],c=this.idToLNode[u.data("target")];if(p!==c&&0==p.getEdgesBetween(c).length)a.add(o.newEdge(),p,c).id=u.id()}var g=function(t,n){"number"==typeof t&&(t=n);var e=t.data("id"),o=i.idToLNode[e];return{x:o.getRect().getCenterX(),y:o.getRect().getCenterY()}},E=function a(){for(var r,s=function(){e.fit&&e.cy.fit(e.eles,e.padding),t||(t=!0,i.cy.one("layoutready",e.ready),i.cy.trigger({type:"layoutready",layout:i}))},d=i.options.refresh,l=0;l<d&&!r;l++)r=i.stopped||i.layout.tick();if(r)return o.checkLayoutSuccess()&&!o.isSubLayout&&o.doPostLayout(),o.tilingPostLayout&&o.tilingPostLayout(),o.isLayoutFinished=!0,i.options.eles.nodes().positions(g),s(),i.cy.one("layoutstop",i.options.stop),i.cy.trigger({type:"layoutstop",layout:i}),n&&cancelAnimationFrame(n),void(t=!1);var u=i.layout.getPositionsData();e.eles.nodes().positions(function(t,n){if("number"==typeof t&&(t=n),!t.isParent()){for(var e=t.id(),o=u[e],i=t;null==o&&(o=u[i.data("parent")]||u["DummyCompound_"+i.data("parent")],u[e]=o,null!=(i=i.parent()[0])););return null!=o?{x:o.x,y:o.y}:{x:t.position("x"),y:t.position("y")}}}),s(),n=requestAnimationFrame(a)};return o.addListener("layoutstarted",function(){"during"===i.options.animate&&(n=requestAnimationFrame(E))}),o.runLayout(),"during"!==this.options.animate&&(i.options.eles.nodes().not(":parent").layoutPositions(i,i.options,g),t=!1),this},p.prototype.getTopMostNodes=function(t){for(var n={},e=0;e<t.length;e++)n[t[e].id()]=!0;return t.filter(function(t,e){"number"==typeof t&&(t=e);for(var o=t.parent()[0];null!=o;){if(n[o.id()])return!1;o=o.parent()[0]}return!0})},p.prototype.processChildrenList=function(t,n,e){for(var o=n.length,i=0;i<o;i++){var a,r,u=n[i],p=u.children(),c=u.layoutDimensions({nodeDimensionsIncludeLabels:this.options.nodeDimensionsIncludeLabels});if((a=null!=u.outerWidth()&&null!=u.outerHeight()?t.add(new s(e.graphManager,new d(u.position("x")-c.w/2,u.position("y")-c.h/2),new l(parseFloat(c.w),parseFloat(c.h)))):t.add(new s(this.graphManager))).id=u.data("id"),a.paddingLeft=parseInt(u.css("padding")),a.paddingTop=parseInt(u.css("padding")),a.paddingRight=parseInt(u.css("padding")),a.paddingBottom=parseInt(u.css("padding")),this.options.nodeDimensionsIncludeLabels&&u.isParent()){var g=u.boundingBox({includeLabels:!0,includeNodes:!1}).w,E=u.boundingBox({includeLabels:!0,includeNodes:!1}).h,y=u.css("text-halign");a.labelWidth=g,a.labelHeight=E,a.labelPos=y}if(this.idToLNode[u.data("id")]=a,isNaN(a.rect.x)&&(a.rect.x=0),isNaN(a.rect.y)&&(a.rect.y=0),null!=p&&p.length>0)r=e.getGraphManager().add(e.newGraph(),a),this.processChildrenList(r,p,e)}},p.prototype.stop=function(){return this.stopped=!0,this};var g=function(t){t("layout","cose-bilkent",p)};"undefined"!=typeof cytoscape&&g(cytoscape),t.exports=g}])});